
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="LeoProject makes LeoFS, which is an open source distributed object storage system and a highly available, distributed, eventually consistent storage system. LeoFS is supporting the following features:Multi-protocol Support - S3-API, REST-API and NFS v3, Large Object Support, Multi Data Center Replication and others.">
      
      
      
        <meta name="author" content="LeoProject">
      
      
        <link rel="shortcut icon" href="../../../favicon.ico">
      
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-1.5.4">
    
    
      
        <title>Environment Configuration - LeoFS Documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-b1a1975878.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../.." title="LeoFS Documentation" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  For Administrators
                </span>
              
                <span class="md-header-nav__parent">
                  Settings
                </span>
              
            
            Environment Configuration
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/leo-project/leofs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    LeoFS Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/leo-project/leofs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../whats_new/" title="What's New?" class="md-nav__link">
      What's New?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../installation/quick/" title="Quick Installation and Setup" class="md-nav__link">
      Quick Installation and Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../installation/cluster/" title="Building a LeoFS' cluster with Ansible" class="md-nav__link">
      Building a LeoFS' cluster with Ansible
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concept and Architecture
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concept and Architecture
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/README/" title="LeoFS' Architecture" class="md-nav__link">
      LeoFS' Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_gateway/" title="LeoGateway's Architecture" class="md-nav__link">
      LeoGateway's Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_storage/" title="LeoStorage's Architecture" class="md-nav__link">
      LeoStorage's Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_manager/" title="LeoManager's Architecture" class="md-nav__link">
      LeoManager's Architecture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      For Administrators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        For Administrators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/planning_for_production/" title="Planning for Production" class="md-nav__link">
      Planning for Production
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/hardware_requirements/" title="Hardware Requirements" class="md-nav__link">
      Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/network_config/" title="Network Configurations" class="md-nav__link">
      Network Configurations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/load_balancing/" title="Load Balancing Configuration" class="md-nav__link">
      Load Balancing Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2" checked>
    
    <label class="md-nav__link" for="nav-5-2">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cluster/" title="Cluster Settings" class="md-nav__link">
      Cluster Settings
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Environment Configuration
      </label>
    
    <a href="./" title="Environment Configuration" class="md-nav__link md-nav__link--active">
      Environment Configuration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" title="Example Configuration" class="md-nav__link">
    Example Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-settings-snmp-config" title="Additional settings - SNMP config" class="md-nav__link">
    Additional settings - SNMP config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notice" title="Notice" class="md-nav__link">
    Notice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-links" title="Related Links" class="md-nav__link">
    Related Links
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../leo_manager/" title="LeoManager Settings" class="md-nav__link">
      LeoManager Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../leo_storage/" title="LeoStorage Settings" class="md-nav__link">
      LeoStorage Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../leo_gateway/" title="LeoGateway Settings" class="md-nav__link">
      LeoGateway Settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/s3/" title="S3-API" class="md-nav__link">
      S3-API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/rest/" title="REST-API" class="md-nav__link">
      REST-API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/nfs_v3/" title="NFS v3" class="md-nav__link">
      NFS v3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      System Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        System Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/flow/" title="Operation Flow" class="md-nav__link">
      Operation Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/systemd/" title="Systemd Services" class="md-nav__link">
      Systemd Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/s3/" title="S3-API related Operations" class="md-nav__link">
      S3-API related Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/cluster/" title="Cluster Operations" class="md-nav__link">
      Cluster Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/data/" title="Data Operations" class="md-nav__link">
      Data Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/multi_dc_replication/" title="Multi Data Center Replication" class="md-nav__link">
      Multi Data Center Replication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      System Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        System Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/log_management/" title="Log Management" class="md-nav__link">
      Log Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/persistent_configuration/" title="Persistent Configuration" class="md-nav__link">
      Persistent Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/monitoring/" title="System Monitoring" class="md-nav__link">
      System Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/migration/" title="System Migration" class="md-nav__link">
      System Migration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/integration/" title="System Integration" class="md-nav__link">
      System Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/multiple_nodes/" title="Multiple Node Instances" class="md-nav__link">
      Multiple Node Instances
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index_of_commands/" title="Index of LeoFS' Commands" class="md-nav__link">
      Index of LeoFS' Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../benchmark/README/" title="Benchmark" class="md-nav__link">
      Benchmark
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      FAQ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        FAQ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/fundamentals/" title="LeoFS Fundamentals" class="md-nav__link">
      LeoFS Fundamentals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/limits/" title="LeoFS Limits" class="md-nav__link">
      LeoFS Limits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/administration/" title="LeoFS Administration" class="md-nav__link">
      LeoFS Administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/client/" title="LeoFS Clients" class="md-nav__link">
      LeoFS Clients
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../production_checklist/README/" title="Production Checklist" class="md-nav__link">
      Production Checklist
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" title="Example Configuration" class="md-nav__link">
    Example Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-settings-snmp-config" title="Additional settings - SNMP config" class="md-nav__link">
    Additional settings - SNMP config
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notice" title="Notice" class="md-nav__link">
    Notice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-links" title="Related Links" class="md-nav__link">
    Related Links
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/leo-project/leofs/edit/master/docs/admin/settings/environment_config.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h1 id="environment-config-files">Environment Config Files<a class="headerlink" href="#environment-config-files" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Starting from v1.3.3, some environment variables used by launch scripts can be redefined in
<strong>"environment config files"</strong>. They have shell syntax and are read by launch scripts.</p>
<p><strong>[Environment Files]</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>leo_manager_0/etc/leo_manager.environment
leo_manager_1/etc/leo_manager.environment
leo_gateway/etc/leo_gateway.environment
leo_storage/etc/leo_storage.environment
</pre></div>
</td></tr></table>

<p>Changing settings in these files is completely optional, but can be used to better organize directories used by LeoFS nodes and simplify upgrades. Here is highly customized example of <code class="codehilite"><span class="na">.environment</span></code> and <code class="codehilite"><span class="na">.config</span></code> files that allow LeoFS to store all work information and logs outside of default installation tree (<code class="codehilite">/usr/local/leofs/&lt;version&gt;</code>).</p>
<p>As a result, upgrade process to newer version becomes as simple as placing <code class="codehilite">leo_*.environment</code> files in <code class="codehilite">etc</code> directory of new version, for example (for <code class="codehilite">leo_manager_0</code>):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">## Stop the process of LeoManager</span>
$ /usr/local/leofs/&lt;old_version&gt;/leo_manager_0/bin/leo_manager stop

<span class="c1">## Overwrite the environment file</span>
$ cp /usr/local/leofs/&lt;old_version&gt;/leo_manager_0/etc/leo_manager.environment <span class="se">\</span>
     /usr/local/leofs/&lt;new_version&gt;/leo_manager_0/etc/

<span class="c1">## Restart the process of LeoManager</span>
$ /usr/local/leofs/&lt;new_version&gt;/leo_manager_0/bin/leo_manager start
</pre></div>
</td></tr></table>

<p>With this, users can place actual config files (like <code class="codehilite">leo_manager.conf</code>) to the directory of their choice and change them independently of version upgrades, and the <code class="codehilite"><span class="na">.environment</span></code> files that need to be placed into installation tree don't need to be changed between versions. With the correct setup, since no work/temporary files will be kept in the installation tree, old version can be removed cleanly.</p>
<div class="admonition note">
<p class="admonition-title">Note: When managing nodes through systemd</p>
<p>Please do not use example commands above (<code class="codehilite">leo_manager stop/start</code>) when running nodes as systemd services for LeoFS v1.3.8 or later, use <code class="codehilite">systemctl stop/start leofs-manager-master</code> instead.</p>
</div>
<h2 id="example-configuration">Example Configuration<a class="headerlink" href="#example-configuration" title="Permanent link">&para;</a></h2>
<p>Contents of <code class="codehilite">/usr/local/leofs/&lt;version&gt;/leo_manager_0/etc/leo_manager.environment</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># pick config file from fixed place</span>
<span class="na">RUNNER_ETC_DIR</span><span class="o">=</span><span class="s">/etc/leofs/leo_manager_0</span>
<span class="c1"># store erlang.log.* and run_erl.log in this directory</span>
<span class="na">RUNNER_LOG_DIR</span><span class="o">=</span><span class="s">/var/log/leofs/leo_manager_0</span>
</pre></div>
</td></tr></table>

<p>Directories defined in <code class="codehilite">RUNNER_ETC_DIR</code> and <code class="codehilite">RUNNER_LOG_DIR</code> <em>(in this example, <code class="codehilite">/etc/leofs/leo_manager_0</code> and <code class="codehilite">/var/log/leofs/leo_manager_0</code>)</em> must be writable by <code class="codehilite">leofs</code> user, also <code class="codehilite">$RUNNER_LOG_DIR/sasl</code> <em>(here <code class="codehilite">/var/log/leofs/leo_manager_0/sasl</code>)</em> must exist:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>drwxr-xr-x. 2 leofs leofs 4096 Apr  4 20:40 /etc/leofs/leo_manager_0/
drwxr-xr-x. 4 leofs leofs 4096 Apr  5 20:00 /var/log/leofs/leo_manager_0/
drwxr-xr-x. 2 leofs leofs 4096 Apr  4 20:40 /var/log/leofs/leo_manager_0/sasl/
</pre></div>
</td></tr></table>

<p>Paths containing whitespace characters (spaces, tabs, etc) aren't allowed in environment files due to technical reasons.</p>
<p>In <code class="codehilite">leo_manager.conf</code>, all options related to directories should point to external paths:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">sasl.sasl_error_log</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/sasl/sasl-error.log</span>
<span class="na">sasl.error_logger_mf_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/sasl</span>
<span class="na">mnesia.dir</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_manager_0/work/mnesia/127.0.0.1</span>
<span class="na">queue_dir</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_manager_0/work/queue</span>
<span class="na">log.erlang</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/erlang</span>
<span class="na">log.app</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/app</span>
<span class="na">log.member_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/ring</span>
<span class="na">log.ring_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/ring</span>
<span class="na">erlang.crash_dump</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_manager_0/erl_crash.dump</span>
</pre></div>
</td></tr></table>

<p>For <code class="codehilite">leo_storage.conf</code> it will be:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">sasl.sasl_error_log</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/sasl/sasl-error.log</span>
<span class="na">sasl.error_logger_mf_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/sasl</span>
<span class="na">obj_containers.path</span> <span class="o">=</span> <span class="s">[/mnt/avs]</span>
<span class="na">log.erlang</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/erlang</span>
<span class="na">log.app</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/app</span>
<span class="na">log.member_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/ring</span>
<span class="na">log.ring_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/ring</span>
<span class="na">queue_dir</span>  <span class="o">=</span> <span class="s">/var/local/leofs/leo_storage/work/queue</span>
<span class="na">leo_ordning_reda.temp_stacked_dir</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_storage/work/ord_reda/</span>
<span class="na">erlang.crash_dump</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_storage/erl_crash.dump</span>
</pre></div>
</td></tr></table>

<p>For <code class="codehilite">leo_gateway.conf</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">sasl.sasl_error_log</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/sasl/sasl-error.log</span>
<span class="na">sasl.error_logger_mf_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/sasl</span>
<span class="na">log.erlang</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/erlang</span>
<span class="na">log.app</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/app</span>
<span class="na">log.member_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/ring</span>
<span class="na">log.ring_dir</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/ring</span>
<span class="na">cache.cache_disc_dir_data</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_gateway/cache/data</span>
<span class="na">cache.cache_disc_dir_journal</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_gateway/cache/journal</span>
<span class="na">queue_dir</span> <span class="o">=</span> <span class="s">/var/local/leofs/leo_gateway/work/queue</span>
<span class="na">erlang.crash_dump</span> <span class="o">=</span> <span class="s">/var/log/leofs/leo_gateway/erl_crash.dump</span>
</pre></div>
</td></tr></table>

<p>All these directories must exist and have correct <strong>ownership/permissions</strong> <em>(writable by <code class="codehilite">leofs</code> user, unless set up otherwise)</em></p>
<h2 id="additional-settings-snmp-config">Additional settings - SNMP config<a class="headerlink" href="#additional-settings-snmp-config" title="Permanent link">&para;</a></h2>
<p>When pursuing "pure" system which keeps all the data out of installation tree, one might also decide to move SNMP agent config and <code class="codehilite">SNMP db directories</code> to external paths, by setting it in <code class="codehilite">leo_manager.config</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">## leo_manager_0.conf</span>
<span class="na">snmp_conf</span> <span class="o">=</span> <span class="s">/etc/leofs/leo_manager_0/leo_manager_snmp</span>
</pre></div>
</td></tr></table>

<p>then copying <code class="codehilite">/usr/local/leofs/&lt;version&gt;/leo_manager_0/snmp/snmpa_manager_0/leo_manager_snmp.config</code> to <code class="codehilite">/etc/leofs/leo_manager_0/leo_manager_snmp</code> and setting</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">{</span><span class="n">db_dir</span><span class="p">,</span> <span class="s">&quot;/var/local/leofs/leo_manager_0/snmp_db&quot;</span><span class="p">},</span>
</pre></div>
</td></tr></table>

<p>in <code class="codehilite">/etc/leofs/leo_manager_0/leo_manager_snmp.config</code> to make sure that absolutely no temporary files are created in <code class="codehilite">/usr/local/leofs</code> tree. It shouldn't matter otherwise since there is no need to keep contents of <code class="codehilite">SNMP db directory</code> between upgrades.</p>
<p><em>(Here, copy of leo_manager_snmp.config was made so that original config would be untouched; while it is possible to change <code class="codehilite">db_dir</code> in original <code class="codehilite">/usr/local/leofs/&lt;version&gt;/leo_manager_0/snmp/snmpa_manager_0/leo_manager_snmp.config</code> as well, doing so would mean that this file needs to be replaced after each upgrade, reducing benefit of only changing <code class="codehilite"><span class="na">.environment</span></code> file after upgrade)</em></p>
<h2 id="notice">Notice<a class="headerlink" href="#notice" title="Permanent link">&para;</a></h2>
<p>Note that this configuration is just an example of how to use <code class="codehilite"><span class="na">.environment</span></code> config features to move all the log files and config files out of the tree so they reside at fixed paths, to simplify configuration changes and upgrades as much as possible.</p>
<p>The resulting upgrade process can be less safe than original one suggested at <a href="../../system_admin/migration/">For Administrators / System Administration / System Migration</a>, because the new version changes working <code class="codehilite">mnesia</code> and <code class="codehilite">queue</code> directories upon launch and going back to the older version might be not always possible.</p>
<p>Users should consider making backups of work directories (<code class="codehilite">/var/local/leofs</code> in this example) before launching the newer version of a node.</p>
<h2 id="related-links">Related Links<a class="headerlink" href="#related-links" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../system_admin/migration/">For Administrators / System Administration / System Migration</a></li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../cluster/" title="Cluster Settings" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Cluster Settings
              </span>
            </div>
          </a>
        
        
          <a href="../leo_manager/" title="LeoManager Settings" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                LeoManager Settings
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            (c) 2012-2017 LeoProject. All rights reserved.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-0b7df094bf.js"></script>
      <script>app.initialize({url:{base:"../../.."}})</script>
      
        <script src="../../../search/require.js"></script>
      
        <script src="../../../search/search.js"></script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-5301881-3","leo-project.net"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>