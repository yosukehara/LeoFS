



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="LeoProject makes LeoFS, which is an open source distributed object storage system and a highly available, distributed, eventually consistent storage system. LeoFS is supporting the following features:Multi-protocol Support - S3-API, REST-API and NFS v3, Large Object Support, Multi Data Center Replication and others.">
      
      
      
        <meta name="author" content="LeoProject">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.1">
    
    
      
        <title>LeoStorage Settings - LeoFS Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.78aab2dc.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#leostorage-settings" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="LeoFS Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                LeoFS Documentation
              </span>
              <span class="md-header-nav__topic">
                LeoStorage Settings
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/leo-project/leofs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    LeoFS Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/leo-project/leofs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../whats_new/" title="What's New?" class="md-nav__link">
      What's New?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../installation/quick/" title="Quick Installation and Setup" class="md-nav__link">
      Quick Installation and Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../installation/cluster/" title="Building a LeoFS' cluster with Ansible" class="md-nav__link">
      Building a LeoFS' cluster with Ansible
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Concept and Architecture
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Concept and Architecture
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/README/" title="LeoFS' Architecture" class="md-nav__link">
      LeoFS' Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_gateway/" title="LeoGateway's Architecture" class="md-nav__link">
      LeoGateway's Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_storage/" title="LeoStorage's Architecture" class="md-nav__link">
      LeoStorage's Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../architecture/leo_manager/" title="LeoManager's Architecture" class="md-nav__link">
      LeoManager's Architecture
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      For Administrators
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        For Administrators
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/planning_for_production/" title="Planning for Production" class="md-nav__link">
      Planning for Production
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/hardware_requirements/" title="Hardware Requirements" class="md-nav__link">
      Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../setup/network_config/" title="Network Configurations" class="md-nav__link">
      Network Configurations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/load_balancing/" title="Load Balancing Configuration" class="md-nav__link">
      Load Balancing Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2" checked>
    
    <label class="md-nav__link" for="nav-5-2">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cluster/" title="Cluster Settings" class="md-nav__link">
      Cluster Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../environment_config/" title="Environment Configuration" class="md-nav__link">
      Environment Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../leo_manager/" title="LeoManager Settings" class="md-nav__link">
      LeoManager Settings
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        LeoStorage Settings
      </label>
    
    <a href="./" title="LeoStorage Settings" class="md-nav__link md-nav__link--active">
      LeoStorage Settings
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prior-knowledge" title="Prior Knowledge" class="md-nav__link">
    Prior Knowledge
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#irrevocable-and-attention-required-items" title="Irrevocable and Attention Required Items:" class="md-nav__link">
    Irrevocable and Attention Required Items:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-configurations" title="Other Configurations" class="md-nav__link">
    Other Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leostorage-configurations" title="LeoStorage Configurations" class="md-nav__link">
    LeoStorage Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erlang-vms-related-configurations" title="Erlang VM's Related Configurations" class="md-nav__link">
    Erlang VM's Related Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-and-tips-of-the-configuration" title="Notes and Tips of the Configuration" class="md-nav__link">
    Notes and Tips of the Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obj95containerspath-obj95containersnum95of95containers" title="obj_containers.path, obj_containers.num_of_containers" class="md-nav__link">
    obj_containers.path, obj_containers.num_of_containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object95storageis95strict95check" title="object_storage.is_strict_check" class="md-nav__link">
    object_storage.is_strict_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-which-can-affect-load-and-cpu-usage" title="Configuration which can affect Load and CPU usage" class="md-nav__link">
    Configuration which can affect Load and CPU usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-related-to-mq" title="Configuration related to MQ" class="md-nav__link">
    Configuration related to MQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-related-to-the-auto-compaction" title="Configuration related to the auto-compaction" class="md-nav__link">
    Configuration related to the auto-compaction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-links" title="Related Links" class="md-nav__link">
    Related Links
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../leo_gateway/" title="LeoGateway Settings" class="md-nav__link">
      LeoGateway Settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/s3/" title="S3-API" class="md-nav__link">
      S3-API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/rest/" title="REST-API" class="md-nav__link">
      REST-API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocols/nfs_v3/" title="NFS v3" class="md-nav__link">
      NFS v3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      System Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        System Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/flow/" title="Operation Flow" class="md-nav__link">
      Operation Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/systemd/" title="Systemd Services" class="md-nav__link">
      Systemd Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/s3/" title="S3-API related Operations" class="md-nav__link">
      S3-API related Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/cluster/" title="Cluster Operations" class="md-nav__link">
      Cluster Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/data/" title="Data Operations" class="md-nav__link">
      Data Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_operations/multi_dc_replication/" title="Multi Data Center Replication" class="md-nav__link">
      Multi Data Center Replication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      System Administration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        System Administration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/log_management/" title="Log Management" class="md-nav__link">
      Log Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/persistent_configuration/" title="Persistent Configuration" class="md-nav__link">
      Persistent Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/monitoring/" title="System Monitoring" class="md-nav__link">
      System Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/migration/" title="System Migration" class="md-nav__link">
      System Migration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/integration/" title="System Integration" class="md-nav__link">
      System Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_admin/multiple_nodes/" title="Multiple Node Instances" class="md-nav__link">
      Multiple Node Instances
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../index_of_commands/" title="Index of LeoFS' Commands" class="md-nav__link">
      Index of LeoFS' Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../benchmark/README/" title="Benchmark" class="md-nav__link">
      Benchmark
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      FAQ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        FAQ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/fundamentals/" title="LeoFS Fundamentals" class="md-nav__link">
      LeoFS Fundamentals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/limits/" title="LeoFS Limits" class="md-nav__link">
      LeoFS Limits
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/administration/" title="LeoFS Administration" class="md-nav__link">
      LeoFS Administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../faq/client/" title="LeoFS Clients" class="md-nav__link">
      LeoFS Clients
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../production_checklist/README/" title="Production Checklist" class="md-nav__link">
      Production Checklist
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prior-knowledge" title="Prior Knowledge" class="md-nav__link">
    Prior Knowledge
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#irrevocable-and-attention-required-items" title="Irrevocable and Attention Required Items:" class="md-nav__link">
    Irrevocable and Attention Required Items:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-configurations" title="Other Configurations" class="md-nav__link">
    Other Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leostorage-configurations" title="LeoStorage Configurations" class="md-nav__link">
    LeoStorage Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erlang-vms-related-configurations" title="Erlang VM's Related Configurations" class="md-nav__link">
    Erlang VM's Related Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes-and-tips-of-the-configuration" title="Notes and Tips of the Configuration" class="md-nav__link">
    Notes and Tips of the Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obj95containerspath-obj95containersnum95of95containers" title="obj_containers.path, obj_containers.num_of_containers" class="md-nav__link">
    obj_containers.path, obj_containers.num_of_containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object95storageis95strict95check" title="object_storage.is_strict_check" class="md-nav__link">
    object_storage.is_strict_check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-which-can-affect-load-and-cpu-usage" title="Configuration which can affect Load and CPU usage" class="md-nav__link">
    Configuration which can affect Load and CPU usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-related-to-mq" title="Configuration related to MQ" class="md-nav__link">
    Configuration related to MQ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-related-to-the-auto-compaction" title="Configuration related to the auto-compaction" class="md-nav__link">
    Configuration related to the auto-compaction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-links" title="Related Links" class="md-nav__link">
    Related Links
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/leo-project/leofs/edit/master/docs/admin/settings/leo_storage.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="leostorage-settings">LeoStorage Settings<a class="headerlink" href="#leostorage-settings" title="Permanent link">&para;</a></h1>
<h2 id="prior-knowledge">Prior Knowledge<a class="headerlink" href="#prior-knowledge" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note: Configuration</p>
<p>LeoStorage's features depend on its configuration. If once a LeoFS system is launched, you cannot modify the following LeoStorage's configurations because the algorithm of the data operation strictly adheres to the settings.</p>
</div>
<h4 id="irrevocable-and-attention-required-items">Irrevocable and Attention Required Items:<a class="headerlink" href="#irrevocable-and-attention-required-items" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Item</th>
<th>Irrevocable?</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LeoStorage Basic</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.path</code></td>
<td>Modifiable with condition</td>
<td>Able to change the directory of the container(s) but not able to add or remove the directory(s). You need to move the data files which are <code class="codehilite">&lt;obj_containers.path&gt;/avs/object</code> and <code class="codehilite">&lt;obj_containers.path&gt;/avs/metadata</code>, which adhere to this configuration.</td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.num_of_containers</code></td>
<td>Yes</td>
<td>Not able to change the configuration because LeoStorage cannot retrieve objects or metadatas.</td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.metadata_storage</code></td>
<td>Yes</td>
<td>As above</td>
</tr>
<tr>
<td><code class="codehilite">num_of_vnodes</code></td>
<td>Yes</td>
<td>As above</td>
</tr>
<tr>
<td><strong>MQ</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">mq.backend_db</code></td>
<td>Modifiable with condition</td>
<td>Lose all the MQ's data after changing</td>
</tr>
<tr>
<td><code class="codehilite">mq.num_of_mq_procs</code></td>
<td>Modifiable with condition</td>
<td>As above</td>
</tr>
<tr>
<td><strong>Replication and Recovery object(s)</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">replication.rack_awareness.rack_id</code></td>
<td>Yes</td>
<td>Not able to change the configuration because LeoFS cannot retrieve objects or metadatas.</td>
</tr>
<tr>
<td><strong>Other Directories Settings</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">queue_dir</code></td>
<td>Modifiable with condition</td>
<td>Able to change the MQ's directory but you need to move the MQ's data, which adhere to this configuration.</td>
</tr>
</tbody>
</table>
<h3 id="other-configurations">Other Configurations<a class="headerlink" href="#other-configurations" title="Permanent link">&para;</a></h3>
<p>If you want to modify settings like where to place <code class="codehilite">leo_storage.conf</code>, what user is starting a LeoStorage process and so on, refer <a href="../environment_config/">For Administrators / Settings / Environment Configuration</a> for more information.</p>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<h3 id="leostorage-configurations">LeoStorage Configurations<a class="headerlink" href="#leostorage-configurations" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LeoManager Nodes</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">managers</code></td>
<td>Name of LeoManager nodes. This configuration is necessary for communicating with <code class="codehilite">LeoManager&#39;s master</code> and <code class="codehilite">LeoManager&#39;s slave</code>.<p><em>( Default: [manager_0@127.0.0.1, manager_1@127.0.0.1] )</em></p></td>
</tr>
<tr>
<td><strong>LeoStorage Basic</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.path</code></td>
<td>Directories of object-containers<p><em>( Default: [./avs] )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.num_of_containers</code></td>
<td>A number of object-containers of each directory. As <strong>backend_db.eleveldb.write_buf_size</strong> * <strong>obj_containers.num_of_containers</strong> memory can be consumed in total, take both into account to meet with your memory footprint requirements on LeoStorage. <p><em>( Default: [8] )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.sync_mode</code></td>
<td>Mode of the data synchronization. There're three modes:<ul><li><code class="codehilite">none</code>: Not synchronization every time <em>(default)</em></li><li><code class="codehilite">periodic</code>: Periodic synchronization which depends on <code class="codehilite">obj_containers.sync_interval_in_ms</code></li><li><code class="codehilite">writethrough</code>: Ensures that any buffers kept by the OS are written to disk every time</li></ul><p><em>( Default: none )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.sync_interval_in_ms</code></td>
<td>Interval in ms of the data synchronization<p><em>( Default: 1000, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">obj_containers.metadata_storage</code></td>
<td>The metadata storage feature is pluggable which depends on <a href="https://github.com/basho/bitcask" target="_blank">bitcask</a> and <a href="https://github.com/basho/eleveldb" target="blank">leveldb</a>.<p><em>( Default: leveldb )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">num_of_vnodes</code></td>
<td>The total number of virtual-nodes of a LeoStorage node for generating the distributed hashtable, RING<p><em>( Default: 168 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">object_storage.is_strict_check</code></td>
<td>Enable strict check between checksum of a metadata and checksum of an object.<p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">object_storage.threshold_of_slow_processing</code></td>
<td>Threshold of slow processing<p><em>( Default: 1000, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">seeking_timeout_per_metadata</code></td>
<td>Timeout of seeking metadatas per a metadata<p><em>( Default: 10, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">max_num_of_procs</code></td>
<td>Maximum number of processes for both write and read operation<p><em>( Default: 3000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">num_of_obj_storage_read_procs</code></td>
<td>Total number of obj-storage-read processes per object-container, AVS<ul><li>Range: [1..100]</li></ul><p><em>( Default: 3 )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.common.loosen_control_at_safe_count</code></td>
<td>When reach a number of safe <em>(clear watchdog)</em>, a watchdog loosen the control<p><em>( Default: 1 )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog / REX</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.rex.is_enabled</code></td>
<td>Enables or disables the rex-watchdog which monitors the memory usage of <em>Erlang's RPC component</em>.<p><em>( Default: true )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.rex.interval</code></td>
<td>An interval of executing the watchdog processing<p><em>( Default: 10, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.rex.threshold_mem_capacity</code></td>
<td>Threshold of memory capacity of binary for Erlang rex<p><em>( Default: 33554432, Unit: <code class="codehilite">byte</code> )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog / CPU</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cpu.is_enabled</code></td>
<td>Enables or disables the CPU-watchdog which monitors both <em>CPU load average</em> and <em>CPU utilization</em><p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cpu.raised_error_times</code></td>
<td>Times of raising error to a client<p><em>( Default: 5 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cpu.interval</code></td>
<td>An interval of executing the watchdog processing<p><em>( Default: 10, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cpu.threshold_cpu_load_avg</code></td>
<td>Threshold of CPU load average<p><em>( Default: 5.0 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cpu.threshold_cpu_util</code></td>
<td>Threshold of CPU utilization<p><em>( Default: 100 )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog / DISK</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.is_enabled</code></td>
<td>Enables or disables the <p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.raised_error_times</code></td>
<td>Times of raising error to a client<p><em>( Default: 5 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.interval</code></td>
<td>An interval of executing the watchdog processing<p><em>( Default: 10, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.threshold_disk_use</code></td>
<td>Threshold of Disk use(%) of a target disk's capacity<p><em>( Default: 85, Unit: <code class="codehilite">percent</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.threshold_disk_util</code></td>
<td>Threshold of Disk utilization<p><em>( Default: 90, Unit: <code class="codehilite">percent</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.threshold_disk_rkb</code></td>
<td>Threshold of disk read KB/sec<p><em>( Default: 98304, Unit: <code class="codehilite">KB</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.threshold_disk_wkb</code></td>
<td>Threshold of disk write KB/sec<p><em>( Default: 98304, Unit: <code class="codehilite">KB</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.disk.target_devices</code></td>
<td>Target devices for checking disk utilization<p><em>( Default: [] )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog / CLUSTER</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cluster.is_enabled</code></td>
<td>Enables or disables the <p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.cluster.interval</code></td>
<td>An interval of executing the watchdog processing<p><em>( Default: 10 )</em></p></td>
</tr>
<tr>
<td><strong>Watchdog / ERRORS</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.error.is_enabled</code></td>
<td>Enables or disables the <p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.error.interval</code></td>
<td>An interval of executing the watchdog processing<p><em>( Default: 60 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">watchdog.error.threshold_count</code></td>
<td>Total counts of raising error to a client<p><em>( Default: 100 )</em></p></td>
</tr>
<tr>
<td><strong>Data Compaction</strong></td>
<td></td>
</tr>
<tr>
<td><strong>Data Compaction / Basic</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">compaction.limit_num_of_compaction_procs</code></td>
<td>Limit of a number of procs to execute data-compaction in parallel<p><em>( Default: 4 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">compaction.skip_prefetch_size</code></td>
<td>Perfetch size when skipping garbage<p><em>( Default: 512 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">compaction.waiting_time_regular</code></td>
<td>Regular value of compaction-proc waiting time/batch-proc<p><em>( Default: 500, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">compaction.waiting_time_max</code></td>
<td>Maximum value of compaction-proc waiting time/batch-proc<p><em>( Default: 3000, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">compaction.batch_procs_regular</code></td>
<td>Total number of regular compaction batch processes<p><em>( Default: 1000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">compaction.batch_procs_max</code></td>
<td>Maximum number of compaction batch processes<p><em>( Default: 1500 )</em></p></td>
</tr>
<tr>
<td><strong>Data Compaction / Automated Data Compaction</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">autonomic_op.compaction.is_enabled</code></td>
<td>Enables or disables the auto-compaction<p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">autonomic_op.compaction.parallel_procs</code></td>
<td>Total number of parallel processes<p><em>( Default: 1 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">autonomic_op.compaction.interval</code></td>
<td>An interval time of between auto-comcations<p><em>( Default: 3600, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">autonomic_op.compaction.warn_active_size_ratio</code></td>
<td>Warning ratio of active size<p><em>( Default: 70, Unit: <code class="codehilite">percent</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">autonomic_op.compaction.threshold_active_size_ratio</code></td>
<td>Threshold ratio of active size. LeoStorage start data-comaction after reaching it<p><em>( Default: 60, <code class="codehilite">percent</code> )</em></p></td>
</tr>
<tr>
<td><strong>MQ</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">mq.backend_db</code></td>
<td>The MQ storage feature is pluggable which depends on <a href="https://github.com/basho/bitcask" target="_blank">bitcask</a> and <a href="https://github.com/basho/eleveldb" target="blank">leveldb</a>.<p><em>( Default: leveldb )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mq.num_of_mq_procs</code></td>
<td>A number of mq-server's processes<p><em>( Default: 8 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mq.num_of_batch_process_max</code></td>
<td>Maximum number of bach processes of message<p><em>( Default: 3000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mq.num_of_batch_process_regular</code></td>
<td>Regular value of bach processes of message<p><em>( Default: 1600 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mq.interval_between_batch_procs_max</code></td>
<td>Maximum value of interval between batch-procs<p><em>( Default: 3000, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mq.interval_between_batch_procs_regular</code></td>
<td>Regular value of interval between batch-procs<p><em>( Default: 500, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><strong>Backend DB / eleveldb</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">backend_db.eleveldb.write_buf_size</code></td>
<td>Write Buffer Size. Larger values increase performance, especially during bulk loads.<br/>Up to two write buffers may be held in memory at the same time, so you may wish to adjust this parameter to control memory usage.Also, a larger write buffer will result in a longer recovery time the next time the database is opened. As <strong>backend_db.eleveldb.write_buf_size</strong> * <strong>obj_containers.num_of_containers</strong> memory can be consumed in total, take both into account to meet with your memory footprint requirements on LeoStorage.<p>( Default: 62914560 )</p></td>
</tr>
<tr>
<td><code class="codehilite">backend_db.eleveldb.max_open_files</code></td>
<td>Max Open Files. Number of open files that can be used by the DB. You may need to increase this if your database has a large working set <em>(budget one open file per 2MB of working set)</em>.<p><em>( Default: 1000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">backend_db.eleveldb.sst_block_size</code></td>
<td>The size of a data block is controlled by the SST block size. The size represents a threshold, not a fixed count. Whenever a newly created block reaches this uncompressed size, leveldb considers it full and writes the block with its metadata to disk. The number of keys contained in the block depends upon the size of the values and keys.<p><em>( Default: 4096 )</em></p></td>
</tr>
<tr>
<td><strong>Replication and Recovery object(s)</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">replication.rack_awareness.rack_id</code></td>
<td><em>Rack-Id</em> for the rack-awareness replica placement feature</td>
</tr>
<tr>
<td><code class="codehilite">replication.recovery.size_of_stacked_objs</code></td>
<td>Size of stacked objects. Objects are stacked to send as a bulked object to remote nodes.<p><em>( Default: 5242880, Unit: <code class="codehilite">byte</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">replication.recovery.stacking_timeout</code></td>
<td>Stacking timeout. A bulked object are sent to a remote node after reaching the timeout.<p><em>( Default: 1, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><strong>Multi Data Center Replication / Basic</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">mdc_replication.size_of_stacked_objs</code></td>
<td>Size of stacked objects. Objects are stacked to send as a bulked object to a remote cluster.<p><em>( Default: 33554432, Unit: <code class="codehilite">byte</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mdc_replication.stacking_timeout</code></td>
<td>Stacking timeout. A bulked object are sent to a remote cluster after reaching the timeout.<p><em>( Default: 30, Unit: <code class="codehilite">sec</code> )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">mdc_replication.req_timeout</code></td>
<td>Request timeout between clusters<p><em>( Default: 30000, Unit: <code class="codehilite">msec</code> )</em></p></td>
</tr>
<tr>
<td><strong>Log</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">log.log_level</code></td>
<td>Log level:<ul><li>0:debug</li><li>1:info</li><li>2:warn</li><li>3:error</li></ul><p><em>( Default: 1 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.is_enable_access_log</code></td>
<td>Enables or disables the access-log feature<p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.access_log_level</code></td>
<td>Access log's level:<ul><li>0: only regular case</li><li>1: includes error cases</li></ul><p><em>( Default: 0 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.erlang</code></td>
<td>Destination of log file(s) of Erlang's log<p><em>( Default: ./log/erlang )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.app</code></td>
<td>Destination of log file(s) of LeoStorage<p><em>( Default: ./log/app )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.member_dir</code></td>
<td>Destination of log file(s) of members of storage-cluster<p><em>( Default: ./log/ring )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.ring_dir</code></td>
<td>Destination of log file(s) of RING<p><em>( Default: ./log/ring )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">log.is_enable_diagnosis_log</code></td>
<td>Destination of data-diagnosis log(s)<p><em>( Default: true )</em></p></td>
</tr>
<tr>
<td><strong>Other Directories Settings</strong></td>
<td></td>
</tr>
<tr>
<td><code class="codehilite">queue_dir</code></td>
<td>Directory of queue for monitoring "RING"<p><em>( Default: ./work/queue )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">snmp_agent</code></td>
<td>Directory of SNMP agent configuration<p><em>( Default: ./snmp/snmpa_storage_0/LEO-STORAGE )</em></p></td>
</tr>
</tbody>
</table>
<h3 id="erlang-vms-related-configurations">Erlang VM's Related Configurations<a class="headerlink" href="#erlang-vms-related-configurations" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="codehilite">nodename</code></td>
<td>The format of the node name is <code class="codehilite">&lt;NAME&gt;@&lt;IP-ADDRESS&gt;</code>, which must be unique always in a LeoFS system<p><em>( Default: storage_0@127.0.0.1 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">distributed_cookie</code></td>
<td>Sets the magic cookie of the node to <code class="codehilite">Cookie</code>. <br/><br/>- See also: <a href="http://erlang.org/doc/reference_manual/distributed.html" target="_blank">Distributed Erlang</a><p><em>( Default: 401321b4 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.kernel_poll</code></td>
<td>Kernel poll reduces LeoFS' CPU usage when it has hundreds (or more) network connections.<p><em>( Default: true )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.asyc_threads</code></td>
<td>The total number of Erlang aynch threads<p>( Default: 32 )</p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.max_ports</code></td>
<td>The max_ports sets the default value of maximum number of ports.<br/><br/>- See also: <a href="http://erlang.org/doc/man/erlang.html">Erlang erlang:open_port/2</a><p><em>( Default: 64000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.crash_dump</code></td>
<td>The output destination of an Erlang crash dump<p><em>( Default: ./log/erl_crash.dump )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.max_ets_tables</code></td>
<td>The maxinum number of <a href="http://erlang.org/doc/man/ets.html" target="_blank">Erlagn ETS</a> tables<p><em>( Default: 256000 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.smp</code></td>
<td><code class="codehilite">-smp</code> enable and <code class="codehilite">-smp</code> start the Erlang runtime system with <a href="https://en.wikipedia.org/wiki/Symmetric_multiprocessing" target="_blank">SMP</a> support enabled.<p><em>( Default: enable )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.schedulers.compaction_of_load</code></td>
<td>Enables or disables scheduler compaction of load. If it's enabled, the Erlang VM will attempt to fully load as many scheduler threads as mush as possible.<p><em>( Default: true )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.schedulers.utilization_balancing</code></td>
<td>Enables or disables scheduler utilization balancing of load. By default scheduler utilization balancing is disabled and instead scheduler compaction of load is enabled, which strives for a load distribution that causes as many scheduler threads as possible to be fully loaded (that is, not run out of work).<p><em>( Default: false )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.distribution_buffer_size</code></td>
<td>Sender-side network distribution buffer size <em>(unit: KB)</em><p><em>( Default: 32768 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.fullsweep_after</code></td>
<td>Option fullsweep_after makes it possible to specify the maximum number of generational collections before forcing a fullsweep, even if there is room on the old heap. Setting the number to zero disables the general collection algorithm, that is, all live data is copied at every garbage collection.<p><em>( Default: 0 )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">erlang.secio</code></td>
<td>Enables or disables eager check I/O scheduling. The flag effects when schedulers will check for I/O operations possible to execute, and when such I/O operations will execute.<p><em>( Default: true )</em></p></td>
</tr>
<tr>
<td><code class="codehilite">process_limit</code></td>
<td>The maxinum number of Erlang processes. Sets the maximum number of simultaneously existing processes for this system if a Number is passed as value. Valid range for Number is [1024-134217727]<p><em>( Default: 1048576 )</em></p></td>
</tr>
</tbody>
</table>
<h3 id="notes-and-tips-of-the-configuration">Notes and Tips of the Configuration<a class="headerlink" href="#notes-and-tips-of-the-configuration" title="Permanent link">&para;</a></h3>
<h4 id="obj95containerspath-obj95containersnum95of95containers">obj_containers.path, obj_containers.num_of_containers<a class="headerlink" href="#obj95containerspath-obj95containersnum95of95containers" title="Permanent link">&para;</a></h4>
<p>You can configure plural object containers with comma separated value of <code class="codehilite">obj_containers.path</code> and <code class="codehilite">obj_containers.num_of_containers</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">obj_containers.path</span> <span class="o">=</span> <span class="s">[/var/leofs/avs/1, /var/leofs/avs/2]</span>
<span class="na">obj_containers.num_of_containers</span> <span class="o">=</span> <span class="s">[32, 64]</span>
</pre></div>
</td></tr></table>

<h4 id="object95storageis95strict95check">object_storage.is_strict_check<a class="headerlink" href="#object95storageis95strict95check" title="Permanent link">&para;</a></h4>
<p>Without setting <code class="codehilite">object_storage.is_strict_check</code> to true, there is a little possibility your data could be broken without any caution even if a LeoFS system is running on a filesystem like ZFS<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> that protect both the metadata and the data blocks through the checksum when bugs of any unexpected or unknown software got AVS files broken.</p>
<h4 id="configuration-which-can-affect-load-and-cpu-usage">Configuration which can affect Load and CPU usage<a class="headerlink" href="#configuration-which-can-affect-load-and-cpu-usage" title="Permanent link">&para;</a></h4>
<p><code class="codehilite">mq.num_of_mq_procs</code> can affect not only the performance/load during recover/rebalance operations but the load while there is at least one node suspended/downed in the cluster. so that setting <code class="codehilite">mq.num_of_mq_procs</code> to an appropriate value based on the amount of expected traffic and hardware specs is really important. This section would give you the brief understanding on <code class="codehilite">mq.num_of_mq_procs</code> and how to choose the optimal value for your requirements.</p>
<ul>
<li>
<p>How the <code class="codehilite">mq.num_of_mq_procs</code> setting affect the system operations</p>
<ul>
<li>High<ul>
<li>Fast recover/rebalance time</li>
<li>High CPU/Load on storage during recover/rebalance and also existing suspended/stopped nodes in the cluster</li>
</ul>
</li>
<li>Low<ul>
<li>Slow recover/rebalance time</li>
<li>Low CPU/Load on storage during recover/rebalance and also existing suspended/stopped nodes in the cluster</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Recommend settings</p>
<ul>
<li>If you have enough CPU resources on storage nodes then set it to a higher one as long as it doesn't affect the operations coming from LeoGateway</li>
<li>If you don't then set it to somewhat a lower one unless the recover take too much time</li>
</ul>
</li>
</ul>
<p>For more details, Please see Issue #987<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup>.</p>
<h4 id="configuration-related-to-mq">Configuration related to MQ<a class="headerlink" href="#configuration-related-to-mq" title="Permanent link">&para;</a></h4>
<p>LeoStorage's MQ mechanism depends on the watchdog mechanism to reduce costs of a message consumption. The MQ dynamically updates <code class="codehilite">a number of batch processes</code> and <code class="codehilite">an interval of a message consumption</code>.</p>
<p><em>Figure: Number-of-batch-processes and interval:</em></p>
<p><img alt="Figure: Number-of-batch-processes and interval" src="../../../assets/leofs-mq-figure.jpg" /></p>
<p>As of Figure: Relationship of Watchdog and MQ, the watchdog can automatically adjust a value of <code class="codehilite">a number of batch processes</code> between <code class="codehilite">mq.num_of_batch_process_min</code> and <code class="codehilite">mq.num_of_batch_process_max</code>, which is increased or decreased with <code class="codehilite">mq.num_of_batch_process_step</code>.</p>
<p>On the other hands, a value of an interval is adjusted between <code class="codehilite">mq.interval_between_batch_procs_min</code> and <code class="codehilite">mq.interval_between_batch_procs_max</code>, which is increased or decreased with <code class="codehilite">mq.interval_between_batch_procs_step</code>.</p>
<p>When the each value reached the min value, the MQ changes the status to <code class="codehilite">suspending</code>, after that the node’s processing costs is changed to low, the MQ updates the status to <code class="codehilite">running</code>, again.</p>
<p><img alt="Figure: Relationship of Watchdog and MQ" src="../../../assets/leofs-watchdog-mq.jpg" /></p>
<h4 id="configuration-related-to-the-auto-compaction">Configuration related to the auto-compaction<a class="headerlink" href="#configuration-related-to-the-auto-compaction" title="Permanent link">&para;</a></h4>
<p>LeoStorage's auto-compaction mechanism also depends on the watchdog mechanism to reduce costs of processing. The Auto-compaction can dynamically update <code class="codehilite">a number of batch processes</code> and <code class="codehilite">an interval of a processing of seeking an object</code>. The basic design of the relationship with the watchdog is similar to the MQ.</p>
<p><em>Figure: Number-of-batch-processes and interval</em></p>
<p><img alt="Figure: Number-of-batch-processes and interval" src="../../../assets/leofs-auto-compaction-figure.jpg" /></p>
<p>As of <em>Figure: Relationship of the watchdog and the auto-compaction</em>, the watchdog automatically adjusts the value of <em>a number of batch processes</em> between <code class="codehilite">compaction.batch_procs_min</code> and <code class="codehilite">compaction.batch_procs_max</code>, which is increased or decreased with <code class="codehilite">compaction.batch_procs_step</code>.</p>
<p>On the other hand, the value of an interval is adjusted between <code class="codehilite">compaction.waiting_time_min</code> and <code class="codehilite">compaction.waiting_time_max</code>, which is increased or decreased with <code class="codehilite">compaction.waiting_time_step</code>.</p>
<p>When the each value reached the min value, the auto-compaction changes the status to <code class="codehilite">suspending</code>, after that the node’s processing costs is changed to low, the auto-compaction updates the status to <code class="codehilite">running</code>, again.</p>
<p><em>Figure: Relationship of the watchdog and the auto-compaction</em></p>
<p><img alt="Figure: Relationship of the watchdog and the auto-compaction" src="../../../assets/leofs-watchdog-auto-compaction.jpg" /></p>
<h2 id="related-links">Related Links<a class="headerlink" href="#related-links" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../../architecture/leo_storage/">Concept and Architecture / LeoStorage's Architecture</a></li>
<li><a href="../../system_admin/monitoring/">For Administrators / System Administration / System Monitoring</a></li>
<li><a href="../../system_operations/cluster/">For Administrators / System Operations / Cluster Operations</a></li>
<li><a href="../../system_operations/data/">For Administrators / System Operations / Data Operations</a></li>
<li><a href="../environment_config/">For Administrators / Settings / Environment Configuration</a></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://en.wikipedia.org/wiki/ZFS" target="_blank">ZFS</a>&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="https://github.com/leo-project/leofs/issues/987#issuecomment-371059490" target="_blank">LeoFS' Issue #987, Measure rebalance/recover-node performance according to mq.num_of_mq_procs</a>&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../leo_manager/" title="LeoManager Settings" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                LeoManager Settings
              </span>
            </div>
          </a>
        
        
          <a href="../leo_gateway/" title="LeoGateway Settings" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                LeoGateway Settings
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            (c) 2012-2018 LeoProject. All rights reserved.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-5301881-3","leo-project.net"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>